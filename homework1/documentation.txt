Документация на домашна работа 1

Процес на решението на подточка a:
1. С command substitution взимаме името на града с английско име Wuhan
	1.1 Прочитаме файла  city.csv като използваме командата cat.
	1.2 След това с grep се намира реда, на който се намира името на града – търсенето е по английското име – втората колона трябва да звършва с името Wuhan на английски.
	1.3. Тъй като името на града се е в първата колона, взимаме нея с командата cut.
2. Използвайки вече намереното име, намираме реда на който се намира с помощта на командата grep.
3. В червъртата колона се съдържа информация за броя смъртни случаи в даден град, затова се изрязва с cut.

Процес на решението на подточка b:
1. Прочитаме файла spread.csv с командата cat.
2. С awk пресмятаме нивото на смъртност на различните градове, които имат поне 101 регистрирани случаи - броят на регистрираните случаи се намира в третата колона, и извеждаме името на града и нивото на смърност във формата "<име на град>: <ниво на смъртност>".
3. Сортираме числово по ниво на смъртност с командата sort по втората колона при разделител ' ' като ги подреждаме от най-голямо число към най-малко.
4. С командата head взимаме първите 10 реда.

Процес на решението на подточка c:
1. Подготвяме данните, които ще обработваме, като свържем двата файла spread.csv и city_province.csv чрез командата join - приема сортиран вход, затова с process substitution сортираме файловете и ги подаваме на join. След тази команда всеки ред има вида <име на провинцията>,<регистрирани случаи>,<смъртни случаи>
2. Сортирамe по име на провинцията с командата sort. След тази команда всички редове, за които <име на провинция> съвпада се намират един до друг.
3. Добавяме нов ред с текст "not valid line", за да бъде различен от останалите редове.
4. С awk смятаме нивото на смъртност за всяка провинция като всеки ред попада в един от следните три случая:
	4.1 Ако номерът на реда е 1, тогава в name се запазва името на провинцията, в reg - броят на регистрираните случаи и в dead - броя на смъртните случаи.
	4.2 Ако името на провинцията на текущия ред съвпада с името на провинцията запазено в променливата name, тогава в reg се прибавят регистрираните случаи от текущия ред, а в dead се прибавят смъртните случаи от текущия ред.
	4.3 Ако името на провинцията не съвпада с името запазено в name, тогава се изписват данните за провинцията с име запазено в променливата name в следния формат <име на провинцията>: <ниво на смъртност>. След последния ред, в name е записано "not valid line", който не трябва да се предава нататък.
5. Сортираме данните по ниво на смъртност с командата sort.
6. С командата head извеждаме само първите 10 провинции.

Процес на решението на подточка d - top_cities_en.sh:
1. Подготвяме данните, които ще обработваме, като свържем двата файла spread.csv и city.csv с командата join. След тази команда всеки ред има вида <име на града>,<английско име на града>,<регистрирани случаи>,<смъртни случаи>.
2. С awk пресмятаме нивото на смъртност на различните градове, които имат поне 101 регистрирани случаи - броят на регистрираните случаи се намира в третата колона, и извеждаме името на града и нивото на смърност във формата "<име на град> (<английско име на град>): <ниво на смъртност>".
3. Сортираме числово по ниво на смъртност с командата sort по втората колона при разделител ' ' като ги подреждаме от най-голямо число към най-малко.
4. С командата head взимаме първите 10 реда.

Процес на решението на подточка d - top_provinces_en.sh:
1. Подготвяме данните, които ще обработваме, като свържем трите файла spread.csv, city_province.csv и province.csv чрез командата join - правим го на два пъти първо свързваме city_province.csv и province.csv, а след това получения файл го свързваме с spread.csv. След тази команда всеки ред има вида <име на провинцията>,<английско име на провинцията>,<регистрирани случаи>,<смъртни случаи>
2. Сортирамe по име на провинцията с командата sort. След тази команда всички редове, за които <име на провинция> съвпада се намират един до друг.
3. Добавяме нов ред с текст "not valid line", за да бъде различен от останалите редове.
4. С awk смятаме нивото на смъртност за всяка провинция като всеки ред попада в един от следните три случая:
	4.1 Ако номерът на реда е 1, тогава в name се запазва името на провинцията, в en - английското име на провинцията, в reg - броят на регистрираните случаи и в dead - броя на смъртните случаи.
	4.2 Ако името на провинцията на текущия ред съвпада с името на провинцията запазено в променливата name, тогава в reg се прибавят регистрираните случаи от текущия ред, а в dead се прибавят смъртните случаи от текущия ред.
	4.3 Ако името на провинцията не съвпада с името запазено в name, тогава се изписват данните за провинцията с име запазено в променливата name в следния формат <име на провинцията> (<английско име на провинцията>): <ниво на смъртност>. След последния ред, в name е записано "not valid line", който не трябва да се предава нататък.
5. Сортираме данните по ниво на смъртност с командата sort.
6. С командата head извеждаме само първите 10 провинции.

Допълнителна литература: 
https://unix.stackexchange.com/questions/298436/can-i-join-against-a-command
https://www.computerhope.com/unix/ujoin.htm
https://www.computerhope.com/unix/uawk.htm
https://askubuntu.com/questions/968576/appending-a-line-to-a-file-in-the-cat-command?fbclid=IwAR12kxNW3iKVEFbvKlF6C0CB_Zn2UgLOzRB3n9yCWjWxVhAwsMf5SrslJns
